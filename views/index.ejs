<%- include('include/_header.ejs') %>

<div class="container">
  <div class="main-content">
    <a href="/add-user">
      <button class="btn btn-info"><i class="fas fa-user-plus"></i> New User</button>
    </a>
    <h1><%= type %></h1>
    <input id="find_name" class="input" type="text" placeholder="Find by name" onchange="onSearch(this.value)" />
    <form action="" method="POST">
      <table class="table table-hover">
        <thead>
          <tr>
            <td>ID</td>
            <td>Name</td>
            <td>Email</td>
            <td>Gender</td>
            <td>Status</td>
            <td>Action</td>
          </tr>
        </thead>
        <tbody>
          <%- include('include/_show.ejs') %>
        </tbody>
      </table>
    </form>
  </div>
</div>

<script>

  const onSearch = (value) => {
    let useValue = value.trim();
    axios
      .get(`http://localhost:3000/api/users?name=${useValue}`)
      .then((result) => {
        console.log(result.data);
      })
      .catch((err) => {
        console.log(err);
      });
  };
</script>

<%- include('include/_footer.ejs') %>
